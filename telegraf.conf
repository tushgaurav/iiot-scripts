[[inputs.mqtt_consumer]]
  servers = ["tcp://dev.infra.orangewood.co:1883"]
  
  # Subscribe to all subtopics under factory1
  topics = [
    "factory1/+/+/+"
  ]

  data_format = "json"
  
  # 1. Set the destination Measurement name
  name_override = "machine_metrics"

  # 2. Treat these JSON keys as Tags (Metadata), not values
  tag_keys = ["sensor_id", "unit", "status"]

  # 3. Parse the Topic String into Tags
  # Topic is: factory1 / assembly_line_01 / conveyor_01 / measurement_type
  [[inputs.mqtt_consumer.topic_parsing]]
    topic = "factory1/+/+/+"
    tags = "factory/_/line/asset/metric_type" 
    # The underscore _ means "ignore this part" if you don't need it, 
    # or you can map it. 